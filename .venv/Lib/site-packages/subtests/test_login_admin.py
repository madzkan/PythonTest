import time
from selenium.webdriver.common.by import By
from appium import webdriver
from src.testproject.sdk.drivers import webdriver

import pytest
import allure


def test_login_admin(driver):
    """login testing for Android."""

    # 1. Click 'login_username_input'

    login_username_input = driver.find_element(MobileBy.ACCESSIBILITY_ID, "login_username_input")
    login_username_input.click()

    # 2. Type 'admin' in 'login_username_input'
    login_username_input = driver.find_element(MobileBy.ACCESSIBILITY_ID, "login_username_input")
    login_username_input.send_keys(f"{admin_name}")

    # 3. Click 'login_password_input'
    login_password_input = driver.find_element(By.XPATH, "//android.widget.EditText[@content-desc = 'login_password_input']")
    login_password_input.click()

    # 4. Type '123456!' in 'login_password_input'
    login_password_input = driver.find_element(By.XPATH,"//android.widget.EditText[@content-desc = 'login_password_input']")
    login_password_input.send_keys(f"{admin_pass}")

    '''
    # (STEP DISABLED)
    # 5. Click 'ANDROID.WIDGET.IMAGEVIEW'
    android_widget_imageview = driver.find_element(By.XPATH,
    "//android.view.ViewGroup/android.view.ViewGroup[1]/android.view.ViewGroup/android.widget.ImageView")
    android_widget_imageview.click()
    '''

    # 6. Make a Swipe gesture from ('1023','1183') to ('945','466')
    driver.swipe(start_x=1023, start_y=1183, end_x=945, end_y=466, duration=300)

    # 7. Click 'Login Test'
    login_test = driver.find_element(By.XPATH, "//android.widget.TextView[@text = 'Login']")
    login_test.click()